# 景区管理系统

## 项目运行环境

本项目使用Intellij idea进行开发，无额外导入jar包，程序入口为gui包中Main类的main函数。管理员的登陆账号和密码均为本人的学号（20175377）。

## 项目结构

本项目的结构可以基本分为以下三个部分：

1. 用户界面模块(GUI)，在本项目中包含在名为gui的包中，主要负责显示用户界面，通过调用功能模块中的相关方法来完成用户与程序之间的交互。gui包中的Main类为本项目运行的入口，运行其中的main函数，可以启动整个程序。
2. 功能模块(function model)，负责实现GUI面板上展示的相关功能，该模块对应着本项目中的tour包。在tour包中，各个类之间相互独立，不同的类代表着不同的功能的集合，（如TourPath类为“导游路线图分析”和“导游路线图生成”这两个功能的集合，这两个功能分别为管理员面板和用户面板提供直接支持）。本模块通过调用封装在基本模块中的算法和数据结构来完成相关的任务。
3. 基本模块(basic model)，对应着本项目中的graph包（包含图的数据结构和相关的算法）和tool包（包含队列和栈两个数据结构以及排序算法）。本模块为整个项目的最底层的，通用的数据结构与算法的实现，与业务逻辑无关。

以下为本项目执行一个功能通用的时序图：

![sequence](时序图.png)

## 项目特色

### 一、图的实现

本项目中的图使用邻接表的方式进行存储，通过HashMap记录每一个元素在数组中的索引。通过这一定义，实现了对图中边和节点高效的增加，删除，查找等操作。下面使用一段简短的代码表示图的基本定义

```java
class Graph{
    HashMap<String, Integer> map; //记录节点对应的索引
    Node[] entry;
    
    private class Node{
        Vertex v;
        List<Edge> edges //节点v的所有邻接边
    }
}
```

### 二、最短路径算法优化

本项目中通过对Dijkstra算法的优化，极大的提高了其执行的效率：

1. 使用优先队列，优化找到下一个需要放松的节点这一步骤。通过优化，使得原本的该步骤由原本O（n）的时间复杂度变为O（ln n），而且由于所有的节点不可能同时存在于优先队列中，该步骤时间复杂度比估计的还要更低一些，在最优的情况下（图中所有点在一条直线上），该步骤的时间复杂度为O（1）
2. 在目标节点被选中用于放松时，停止算法执行。当一个节点被选中用于放松时，就说明其最短路径已经确定下来，因此停止算法执行不会影响其正确性，通过这个优化，该算法在最优的情况（需要寻找最短路径的两个节点直接相连）下可以达到O（1）的时间复杂度。

### 三、导游路线图分析

本项目中导游路线图的生成可以分为以下两个步骤：

1. 使用近似算法，基于所有边之间相互可达这一假设，求得一个理想的最优路径。
2. 对理想路径进行分析，找到所有的缺失路径，使用最短路径算法进行填补，最终生成一条实际可行的导游路径。

本项目实现了两种不同的近似算法，第一种是先使用最小生成树算法获得一个最小生成树，对最小生成树进行前序遍历即可得到一个理想最优解。第二种是使用蚁群算法，通过模仿蚂蚁寻路来获得一个理想的最优汉密尔顿回路。这两种算法中，前一种算法时间复杂度低，效果较差。而第二种则可以算出很好的结果，但是时间复杂度高。

根据用户身份不同，程序最终展现的结果也不同。对于游客来说，程序只会计算出一个导游路线图为游客提供参考，而对于管理员来说，程序会给出详细的分析（包括理想路径，缺失路径信息，实际计算所得的路径），这些信息可以为景区的规划建设提供一个参考。

